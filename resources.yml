resources:
  - name: env-test
    type: ecsCluster
    integration: avi-ecs
    source:
      name : "test-aws" #name of the cluster we are deploying
      region: "us-east-1"

  - name: dv-image
    type: image
    integration: avinci-dh
    source:
      name: "aye0aye/dv"
      isPull: false
      tag: "master.12"

  - name: dv-params
    type: params
    source:
      params:
        MONGO_API_URL: "https://api.mlab.com/api/1/databases/ayeaye/collections/boxes?apiKey=9hYmSC1dYH1CBu2PjBB5Vi5ff6OJyD9x"

  - name: dv-opts
    type: dockerOptions
    source:
      memory: 64
      cpu-shares: 256
      portMappings:
        - 80:80

  - name: dv-scaler
    type: replicas
    source:
      count: 2

  - name: box-image
    type: image
    integration: avinci-dh
    source:
      name: "aye0aye/box"
      isPull: false
      tag: "master.34"

  - name: box-opts
    type: dockerOptions
    source:
      memory: 64
      cpu-shares: 512

  - name: box-test-params
    type: params
    source:
      params:
        DB_HOST: "ds015700.mlab.com"
        DB_NAME: "ayeaye"
        DB_PORT: "15700"
        DB_USERNAME: "aye0aye"
        DB_PASSWORD: "aye0aye"
        ENVIRONMENT: "dev-aws"

  - name: box-prod-scaler
    type: replicas
    source:
      count: 1

  - name: box-prod-params
    type: params
    source:
      params:
        ENVIRONMENT: "prod-aws"

  - name: env-prod
    type: ecsCluster
    integration: avi-ecs
    source:
      name : "prod-aws" #name of the cluster we are deploying
      region: "us-east-1"
